<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css">
<script src="//code.jquery.com/ui/1.12.1/jquery-ui.js"></script> 
<title>Insert title here</title>
</head>
<body>
<!-- 문제 : 다음 필드 값에 입력되면 국어 영아 수학 점수의 합계와 평균을 
 			자동 계산하는 프로그램을 작성하시오 
 			이벤트 : keyup이벤트-->
<table width="100" id="table1">
	<thead>
		<tr>
			<td>국어</td><td>영어</td><td>수학</td><td>합계</td><td>평균</td>
		</tr>
	</thead>
	<tbody>
		 <tr>
			<td><input type = "text" name = "txt1[]"></td>
			<td><input type = "text" name = "txt2[]"></td>
			<td><input type = "text" name = "txt3[]"></td>
			<td><input type = "text" name = "sum[]"></td>
			<td><input type = "text" name = "avra[]"></td>
		</tr> 
		<tr>
			<td><input type = "text" name = "txt1[]"></td> <!-- 값을 가져올 때 val() -->
			<td><input type = "text" name = "txt2[]"></td>
			<td><input type = "text" name = "txt3[]"></td>
			<td><input type = "text" name = "sum[]"></td>
			<td><input type = "text" name = "avra[]"></td>
		</tr>
	</tbody>
</table>

<script>
 		$.fn.val2 = function(){ // jquery에서 사용자 정의 함수 등록 방법
		   // Object에 직접 사용이 가능 selector에 의해 선택된 것들을 의미함
		   var tmp = $(this).val();
		   if(tmp == ""){tmp = 0;}
		   return parseInt(tmp,10); // 10진수로 변경
		}

		$(document).ready(function(){
		   $("#table1 tr").each(function(idx){
		      var thisTr = $(this); // 각 행
		      // 각 행에 대하여 keyup 이벤트 처리기 등록
		      // keyup의 매개변수의 형식 : .on(events[, selector ] , [, data ], [, handler ] )
		      thisTr.on("keyup", $(":text").slice(0, 4), function(e){
		         var txt1 = thisTr.find(":text[name='txt1[]']").val2();
		         var txt2 = thisTr.find(":text[name='txt2[]']").val2();
		         var txt3 = thisTr.find(":text[name='txt3[]']").val2();
		         var tot = txt1 + txt2 + txt3;
		         var avra = Math.round(tot/3 * 100 + 0.4)/ 100; // Math.round 반올림
		         thisTr.find(":text[name='sum[]']").val(tot);
		         thisTr.find(":text[name='avra[]']").val(avra);
		      });
		   });
		}); 
</script>
</body>
</html>













